var Shared,Account;(function(n){"use strict";(function(n){n[n.ExistingUserByUsername=0]="ExistingUserByUsername";n[n.NewUserByUsername=1]="NewUserByUsername";n[n.ExistingUserByEmail=2]="ExistingUserByEmail";n[n.NewUserByEmail=3]="NewUserByEmail";n[n.CurrentUserByEmail=4]="CurrentUserByEmail";n[n.OldPassword=5]="OldPassword";n[n.IsRequired=6]="IsRequired";n[n.Username=7]="Username";n[n.Email=8]="Email";n[n.Password=9]="Password";n[n.Compare=10]="Compare";n[n.GreaterThan=11]="GreaterThan";n[n.GreaterThanEqualTo=12]="GreaterThanEqualTo";n[n.LessThan=13]="LessThan";n[n.LessThanEqualTo=14]="LessThanEqualTo"})(n.ValidationType||(n.ValidationType={}));var t=n.ValidationType})(Shared||(Shared={})),function(n){"use strict";var t=function(){function n(n,t,i,r,u,f){this.scope=n;this.labels=t;this.http=i;this.route=r;this.location=u;this.cache=f}return n.prototype.bootstrap=function(){var n=this,t;this.scope.ready=!1;this.scope.loading=!1;this.scope.valid=!0;this.scope.success=!1;this.scope.readonly=null;this.scope.model={};this.scope.labels=this.labels;this.scope.alerts=[];this.scope.cache=this.cache;this.scope.path=this.location.path();t=this.location.search().redirect;t&&t.length!==0&&t.substring(0,1)==="/"&&(this.scope.redirect=t);this.scope.add=function(t,i){typeof n.cache[t]=="undefined"&&(n.cache[t]=i)};this.scope.closeAlert=function(t){typeof t=="undefined"&&(t=0);n.scope.alerts.splice(t,1)};this.scope.load=function(t){n.begin();n.http.get(t).success(function(t){n.loadComplete(t)}).error(function(t){n.error(t)})};this.scope.post=function(t,i,r){n.begin();n.http.post(t,i).success(function(t){r?r():n.postComplete(t)}).error(function(t){n.error(t)})};this.scope.edit=function(){n.original={};n.flush();n.scope.readonly=!1};this.scope.view=function(){n.scope.readonly=!0;angular.extend(n.scope.model,n.original)};this.scope.reset=function(){n.route.reload()}},n.prototype.begin=function(){this.scope.loading=!0;this.scope.valid=!0;typeof this.scope.readonly!="boolean"||this.scope.readonly||this.flush()},n.prototype.end=function(){this.scope.loading=!1},n.prototype.loadComplete=function(n){n.data?(angular.extend(this.scope.model,n.data),this.end(),this.scope.ready=!0):this.location.path(this.route.routes[null].redirectTo)},n.prototype.postComplete=function(n){n.data&&(angular.extend(this.scope.model,n.data),typeof this.scope.readonly!="boolean"||this.scope.readonly||this.flush());this.scope.success=!0;this.scope.readonly||this.scope.view();this.end();this.pushAlert(n.message,"success")},n.prototype.error=function(n){this.scope.valid=!1;this.end();this.pushAlert(n.message,"danger")},n.prototype.pushAlert=function(n,t){n&&this.scope.alerts.push({msg:n,type:t})},n.prototype.flush=function(){angular.extend(this.original,this.scope.model)},n}();n.Initializer=t}(Shared||(Shared={})),function(n){"use strict";var t=function(){function n(){this.size=10}return n.prototype.url=function(n){var i=n,t="?";return this.index&&(i+=t+"index="+this.index,t="&"),this.size&&(i+=t+"size="+this.size,t="&"),this.name&&(i+=t+"name="+this.name,t="&"),this.direction&&(i+=t+"direction="+this.direction,t="&"),this.filter&&(i+=t+"filter="+encodeURIComponent(this.filter)),i},n}();n.Parameters=t}(Shared||(Shared={})),function(n){"use strict";var t=function(){function t(t,i,r,u,f){this.scope=t;this.controller=i;this.http=r;this.options=u;this.callback=f;this.type=n.ValidationType[this.options.type]}return t.prototype.bootstrap=function(){var n=this;this.scope.$watch("readonly",function(){n.validate()});this.scope.$watch(function(){return n.controller.$modelValue},function(){n.validate()});this.type===10&&this.scope.$watch(function(){return n.scope.model[n.options.compareTo]},function(){n.validate()})},t.prototype.validate=function(){var i=this,t,r;if(this.scope.readonly||typeof this.controller.$modelValue=="undefined"){this.callback();return}t={};switch(this.type){case 0:case 1:t.username=this.controller.$modelValue;break;case 2:case 3:t.email=this.controller.$modelValue;break;case 4:t.username=this.scope.model.username;t.email=this.controller.$modelValue;break;case 5:t.oldPassword=this.controller.$modelValue;break;case 6:t.value=this.controller.$modelValue;break;case 7:t.username=this.controller.$modelValue;break;case 8:t.email=this.controller.$modelValue;break;case 9:t.password=this.controller.$modelValue;break;case 10:t.compare=this.controller.$modelValue;t.compareTo=this.scope.model[this.options.compareTo];break;case 11:case 12:case 13:case 14:t.compare=this.controller.$modelValue;t.compareTo=this.options.compareTo?this.scope.model[this.options.compareTo]:this.options.value}r="/api/validation/"+n.ValidationType[this.type].toLowerCase();this.http.post(r,t).success(function(n){var t=n.data?n.data.hint:null;i.callback(!0,t)}).error(function(n){var t=n.data?n.data.hint:null;i.callback(!1,t)})},t}();n.Validation=t}(Shared||(Shared={})),function(n){"use strict";angular.module("app.services",[]).service("$provider",["$http","$route","$location",function(t,i,r){var u=this;this.bootstrap=function(f,e){var o=new n.Initializer(f,e,t,i,r,u.cache);o.bootstrap()};this.cache={}}])}(Shared||(Shared={})),function(n){"use strict";angular.module("app.directives",[]).directive("activate",["$location",function(n){return{restrict:"A",link:function(t,i,r){t.$watch(function(){return n.path()},function(n){r.href.match(new RegExp("^"+n+"$","i"))?(i.addClass("active"),$("#sidebar .panel-collapse").first().removeClass("in"),i.parent().addClass("in")):i.removeClass("active")})}}}]).directive("alerts",function(){return{restrict:"E",template:'<alert class="fixed" ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)" fade>{{alert.msg}}<\/alert>'}}).directive("fade",function(){return{restrict:"A",link:function(n,t){t.delay(5e3).fadeOut(400,function(){n.closeAlert()})}}}).directive("breadcrumb",function(){return{restrict:"E",replace:!0,scope:!0,template:'<div><span ng-repeat="crumb in breadcrumb"><span class="label text-capitalize" ng-class="{\'label-default\': !$last, \'label-primary\': $last}">{{crumb}}<\/span>\n<\/span><\/div>',link:function(n){n.breadcrumb=[];var t=n.path.split("/").splice(1);$.each(t,function(t,i){var r=n.labels[i];r&&n.breadcrumb.push(r)})}}}).directive("interactive",function(){return{restrict:"A",link:function(n,t){n.$watch("valid",function(n){n?t.removeClass("has-error"):(t.addClass("has-error"),t.find("input").first().focus())})}}}).directive("editable",function(){return{restrict:"A",link:function(n,t){n.readonly=!0;var i=function(){n.$watch("readonly",function(n){t.find("input").prop("disabled",n);t.find("select").prop("disabled",n);t.find("textarea").prop("disabled",n)})},r=n.$watch("ready",function(n){n&&(i(),r())})}}}).directive("load",["$routeParams",function(n){return{restrict:"A",link:function(t,i,r){var u,f,e;i.hide();angular.extend(t.model,n);u=t.$eval(r.load);r.cacheKey?(f=t.cache[r.cacheKey],t.load(f.url(u))):t.load(u);e=t.$watch("ready",function(n){n&&(i.show(),e())})}}}]).directive("autofocus",function(){return{restrict:"A",link:function(n,t){t.focus()}}}).directive("captcha",function(){return{restrict:"E",replace:!0,template:'<div class="checkbox"><label class="checkbox"><input type="checkbox" value="valid" required ng-model="model.captcha" /> I am not a spambot<\/label><\/div>'}}).directive("validate",["$http",function(t){return{restrict:"A",require:"ngModel",link:function(i,r,u,f){var o=r.closest(".form-group"),e,s,h;o.addClass("has-feedback");e=$('<span class="glyphicon form-control-feedback"><\/span>');r.after(e);s=function(n,t){f.$setValidity("change",n);var r=o.find(".help-block");if(i.readonly||typeof f.$modelValue=="undefined"){o.removeClass("has-success");o.removeClass("has-error");e.removeClass("glyphicon-ok");e.removeClass("glyphicon-remove");r.remove();return}t?r.length===0?e.after('<span class="help-block">'+t+"<\/span>"):r.text(t):r.remove();n?(o.removeClass("has-error"),e.removeClass("glyphicon-remove"),o.addClass("has-success"),e.addClass("glyphicon-ok")):(o.removeClass("has-success"),e.removeClass("glyphicon-ok"),o.addClass("has-error"),e.addClass("glyphicon-remove"))};h=new n.Validation(i,f,t,i.$eval(u.validate),s);h.bootstrap()}}}]).directive("grid",function(){return{restrict:"E",scope:!0,templateUrl:"/public/javascripts/shared/templates/grid.html",link:function(n,t,i){n.parameters=n.cache[i.cacheKey];n.icon=i.icon?i.icon:"fa-edit";var r=n.$eval(i.load);n.resize=function(t){n.parameters.size=t;n.load(n.parameters.url(r))};n.filter=function(){n.load(n.parameters.url(r))};n.sort=function(t){n.parameters.name===t?n.parameters.direction==="asc"?n.parameters.direction="desc":n.parameters.direction==="desc"&&(delete n.parameters.name,delete n.parameters.direction):(n.parameters.name=t,n.parameters.direction="asc");n.load(n.parameters.url(r))};n.page=function(){n.parameters.index=n.model.stats.page-1;n.load(n.parameters.url(r))}}}})}(Shared||(Shared={})),function(){"use strict";angular.module("app",["ngRoute","ui.bootstrap","app.services","app.directives"]).config(["$routeProvider","$locationProvider",function(n,t){n.when("/account",{controller:"main",templateUrl:"public/javascripts/account/templates/index.html"}).when("/account/register",{controller:"main",templateUrl:"/account/templates/register"}).when("/account/activate",{controller:"main",templateUrl:"/public/javascripts/account/templates/activate.html"}).when("/account/signin",{controller:"main",templateUrl:"/account/templates/signin"}).when("/account/forgotpassword",{controller:"main",templateUrl:"/account/templates/forgotpassword"}).when("/account/resetpassword",{controller:"main",templateUrl:"/public/javascripts/account/templates/resetpassword.html"}).when("/account/changepassword",{controller:"main",templateUrl:"/public/javascripts/account/templates/changepassword.html"}).when("/account/personalinformation",{controller:"main",templateUrl:"/public/javascripts/account/templates/personalinformation.html"}).otherwise({redirectTo:"/account/signin"});t.html5Mode(!0)}])}(Account||(Account={})),function(){"use strict";angular.module("app").controller("main",["$scope","$provider","$location",function(n,t,i){t.bootstrap(n,{account:"Account",personalinformation:"Personal information",changepassword:"Change password"});n.register=function(){n.post("/api/account/register",n.model)};n.activate=function(){n.post("/api/account/activate",i.search())};n.signIn=function(){n.post("/api/account/signin",n.model,function(){location.href=n.redirect?n.redirect:"/"})};n.retrievePassword=function(){n.post("/api/account/retrievepassword",n.model)};n.resetPassword=function(){n.post("/api/account/resetpassword",angular.extend(n.model,i.search()))};n.changePassword=function(){n.post("/api/account/changepassword",n.model)};n.updatePersonalInformation=function(){n.post("/api/account/updatepersonalinformation",n.model)}}])}(Account||(Account={}));
/*
//# sourceMappingURL=account.min.js.map
*/